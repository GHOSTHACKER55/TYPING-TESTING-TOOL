<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ANONYMOUS SHADOWS - Typing Tool</title>

<!-- Firebase SDKs -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-messaging-compat.js"></script>

<!-- Styles -->
<style>
  body{
    font-family: 'Arial', sans-serif;
    background: #0f172a;
    color: #fff;
    display: flex;
    justify-content: center;
    padding: 20px;
  }
  .container{
    max-width: 700px;
    width: 100%;
    background:#020617;
    padding: 20px;
    border-radius: 12px;
    text-align: center;
  }
  h1{
    margin-bottom: 15px;
    color:#38bdf8;
  }
  .sentence{
    background: #1e293b;
    padding: 15px;
    border-radius: 8px;
    margin-bottom: 15px;
    font-size: 18px;
  }
  textarea{
    width: 100%;
    height: 120px;
    font-size: 16px;
    padding: 10px;
    border-radius: 6px;
    border: none;
    resize: none;
  }
  button{
    margin: 10px 5px;
    padding: 10px 20px;
    font-size:16px;
    cursor: pointer;
    border-radius:6px;
    border:none;
    background:#2563eb;
    color:#fff;
  }
  #result{
    margin-top: 15px;
    font-size: 18px;
  }
</style>
</head>

<body>
<div class="container">
  <h1>ANONYMOUS SHADOWS</h1>

  <div class="sentence" id="sentence">HOW ARE YOU HOW YOUR DAY GOES</div>

  <textarea id="input" placeholder="Type the sentence here..."></textarea>
  <br>
  <button onclick="startTest()">Start</button>
  <button onclick="resetTest()">Reset</button>

  <div id="result"></div>
</div>

<script>
  // ðŸ”‘ Firebase Config - Replace with your own
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    projectId: "YOUR_PROJECT_ID",
    messagingSenderId: "YOUR_SENDER_ID",
    appId: "YOUR_APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();
  const messaging = firebase.messaging();

  // Request notification permission
  Notification.requestPermission().then(permission=>{
    if(permission==="granted"){
      messaging.getToken({vapidKey:"YOUR_VAPID_KEY"}).then(token=>{
        db.collection("tokens").add({token:token, time: new Date()});
      });
    }
  });

  // Typing Tool Logic
  let startTime, endTime, started=false;

  function startTest(){
    document.getElementById("input").value="";
    document.getElementById("result").innerHTML="";
    started=true;
    startTime=new Date().getTime();
    document.getElementById("input").focus();

    // Track tool opened
    db.collection("visits").add({
      date:new Date().toISOString().slice(0,10),
      time:new Date().toLocaleTimeString(),
      typed:false
    });
  }

  document.getElementById("input").addEventListener("keyup",function(){
    if(!started) return;

    let typed=this.value;
    let sentence=document.getElementById("sentence").innerText;

    if(typed.trim()===sentence){
      endTime=new Date().getTime();
      let timeTaken=(endTime-startTime)/1000;
      let words=sentence.split(" ").length;
      let wpm=Math.round((words/timeTaken)*60);
      let accuracy=Math.round((sentence.length/typed.length)*100);

      document.getElementById("result").innerHTML =
        `âŒ› Time: ${timeTaken}s | âš¡ WPM: ${wpm} | ðŸŽ¯ Accuracy: ${accuracy}%`;

      // Update typed status
      db.collection("visits").add({typed:true, time:new Date()});
      started=false;
    }
  });

  function resetTest(){
    document.getElementById("input").value="";
    document.getElementById("result").innerHTML="";
    started=false;
  }
</script>

</body>
</html>